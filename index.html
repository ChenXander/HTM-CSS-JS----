<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">

</head>
<body>
<!-- 模拟body -->
<div class="wrap">
    <!-- 头部 -->
    <div class="header">
        <div class="top">
            <div class="topMain">
                <!-- 登录注册 -->
                <div class="login">
                    <p>欢迎来到尚品汇！请</p>
                    <p class="loginBtn">
                        <a href="#" class="btn1">登录</a>
                        <a href="#" class="btn2">注册</a>
                    </p>
                </div>
                <!-- 头部导航 -->
                <div class="topNav">
                    <a href="#">我的订单</a>
                    <a href="#">我的购物车</a>
                    <a href="#">我的尚品汇</a>
                    <a href="#">尚品汇会员</a>
                    <a href="#">企业采购</a>
                    <a href="#">关注尚品汇</a>
                    <a href="#">合作招商</a>
                    <a href="#">商家后台</a>
                </div>


            </div>

        </div>
        <div class="bottom">
            <div class="bottomMain">
                <!-- Logo -->
                <h1 class="logo">
                    <a href="#">
                        <img src="./images/Logo.png" alt="">
                    </a>
                </h1>
                <!-- 搜索 -->
                <div class="search">
                    <input type="text">
                    <button>搜索</button>
                </div>
            </div>
        </div>
    </div>
    <!-- 分类导航 -->
    <div class="typeNav">
        <div class="typeNavMain">
            <h3>全部商品分类</h3>
            <div>
                <a href="#">服装城</a>
                <a href="#">美妆馆</a>
                <a href="#">尚品汇超市</a>
                <a href="#">全球购</a>
                <a href="#">闪购</a>
                <a href="#">团购</a>
                <a href="#">有趣</a>
                <a href="#">秒杀</a>
            </div>
        </div>
    </div>
    <!-- 商品内容区域 -->
    <div class="main">
        <div class="mainCon">
            <!-- 路径导航 -->
            <div class="conPoin">
                <!-- <a href="##">手机、数码、通讯</a>
                <i>/</i>
                <a href="#">手机</a>
                <i>/</i>
                <a href="#">Apple苹果</a>
                <i>/</i>
                <a>iphone 6S系类</a> -->
            </div>
            <!-- 商品区域 -->
            <div class="infoWrap">
                <!-- 放大镜区域 -->
                <div class="previwWrap">
                    <!-- 放大镜 -->
                    <div class="previw">
                        <!-- 小图容器 -->
                        <div class="zoomImgBox">
                            <!-- 小图 -->
                            <img src="./images/s1.png" alt="">
                            <!-- 蒙版 -->
                        </div>
                        <!-- 大图容器 -->

                    </div>
                    <!-- 缩略图 -->
                    <div class="thumbnail">
                        <a href="javascript:;" class="prev">&lt;</a>
                        <!-- 图片显示区域 -->
                        <div class="itemWrap">
                            <ul>
                                <li><img src="./images/s1.png" alt=""></li>
                                <li><img src="./images/s2.png" alt=""></li>
                                <li><img src="./images/s3.png" alt=""></li>
                                <li><img src="./images/s1.png" alt=""></li>
                                <li><img src="./images/s2.png" alt=""></li>
                                <li><img src="./images/s3.png" alt=""></li>
                                <li><img src="./images/s1.png" alt=""></li>
                                <li><img src="./images/s2.png" alt=""></li>
                                <li><img src="./images/s3.png" alt=""></li>
                                <li><img src="./images/s1.png" alt=""></li>
                                <li><img src="./images/s2.png" alt=""></li>
                                <li><img src="./images/s3.png" alt=""></li>
                            </ul>
                        </div>
                        <a href="javascript:;" class="next">&gt;</a>
                    </div>
                </div>
                <!-- 筛选区域 -->
            </div>
        </div>
    </div>
</div>

</body>
<script src="./js/data.js"></script>
<script>
    window.onload = function () {

        // 路径导航
        conPoin();
        function conPoin() {
            // 需要获取数据
            var path = goodData.path;
            // 路径导航的父容器
            var conPoinNode = document.querySelector('.wrap .main .mainCon .conPoin');

            for (let i = 0; i < path.length; i++) {
                // 数组的长度是多少就需要创建多少个a标签，所以直接在循环最开始的时候创建a标签即可
                var aNode = document.createElement('a');

                // 判断是否是最后一个路径，如果是不需要设置href属性，不需要创建i标签
                if (i == path.length - 1) {
                    // 只要能进入这个if中，说明path[i]一定对应数组当中的最后一个元素的内容
                    aNode.innerHTML = path[i].title; //在遍历的过程中，使用path这个数组中每一个对象的title属性的值作为a的内容
                    conPoinNode.appendChild(aNode);
                } else {
                    // 如果不是最后一个。我们就需要给a标签设置文本，设置href属性，并且同时创建i标签添加斜线
                    aNode.innerHTML = path[i].title;
                    aNode.href = path[i].url;
                    conPoinNode.appendChild(aNode);
                    var iNode = document.createElement('i');
                    iNode.innerHTML = '/';
                    conPoinNode.appendChild(iNode);
                }
            }
        }

        // 放大镜
        previw();
        function previw() {
            // 放大镜父容器
            var previwNode = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw');
            // 小图容器
            var zoomImgBox = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw .zoomImgBox');
            // 创建蒙版
            var maskNode = null;
            // 创建大图
            var bigImg = null;
            // 大图容器
            var bigImgBox = null;

            // 当鼠标移入时 创建蒙版 大图容器 大图
            previwNode.onmouseenter = function () {
                if (!maskNode) {
                    // 创建蒙版
                    maskNode = document.createElement('div');
                    maskNode.className = 'mask';
                    zoomImgBox.appendChild(maskNode);
                    // 创建大图容器
                    bigImgBox = document.createElement('div');
                    bigImgBox.className = 'bigImgBox';
                    previwNode.appendChild(bigImgBox);
                    // 创建大图
                    bigImg = new Image(); //等价bigImg = document.createElement('img');
                    bigImg.src = './images/b1.png';
                    bigImgBox.appendChild(bigImg);
                }

                // 当移入放大器区域时，才需要绑定move事件
                zoomImgBox.onmousemove = function () {

                }
                // 当鼠标离开放大镜区域时，移除move事件和leave事件，并且删除蒙版 大图容器 大图
                previwNode.onmouseleave = function () {
                    zoomImgBox.removeChild(maskNode);
                    previwNode.removeChild(bigImgBox);
                    // 删除元素后需要重置元素变量为空的状态
                    maskNode = null; //实际只需要重置maskNode，因为if判断条件依据maskNode
                    bigImgBox = null;
                    bigImg = null;

                    zoomImgBox.onmousemove = null;
                    previwNode.onmouseleave = null;
                }
            }
        }
    }
</script>
</html>